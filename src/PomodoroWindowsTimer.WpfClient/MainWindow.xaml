<Window x:Class="PomodoroWindowsTimer.WpfClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Behaviors="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:conv="clr-namespace:PomodoroWindowsTimer.WpfClient.Converters"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:digitPanel="clr-namespace:p1eXu5.Wpf.DigitPanel;assembly=p1eXu5.Wpf.DigitPanel"
        xmlns:local="clr-namespace:PomodoroWindowsTimer.WpfClient"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:settings="clr-namespace:PomodoroWindowsTimer.WpfClient.UserControls.Settings"
        xmlns:usercontrols="clr-namespace:PomodoroWindowsTimer.WpfClient.UserControls"
        xmlns:vm="clr-namespace:PomodoroWindowsTimer.ElmishApp;assembly=PomodoroWindowsTimer.ElmishApp"
        x:Name="m_Root"
        Title="{Binding Title}"
        Width="800"
        Height="520"
        MinWidth="800"
        MinHeight="520"
        usercontrols:UIAssistant.AreRunningTimePointsShown="False"
        FontFamily="{DynamicResource MaterialDesignFont}"
        Icon="pomodoro-technique.ico"
        TextElement.FontSize="13"
        TextElement.FontWeight="Regular"
        TextElement.Foreground="{DynamicResource MaterialDesign.Brush.Foreground}"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        WindowStartupLocation="CenterScreen"
        mc:Ignorable="d"
        Background="{StaticResource br_Base}"
        >
    <Window.Resources>
        <DataTemplate x:Key="dt_BotSettingsDialog">
            <settings:BotSettings DataContext="{Binding}" />
        </DataTemplate>
        <conv:ActualWidthToTopRightPointConverter x:Key="conv_ActualWidthToTopRightPoint" />
        <conv:ActualWidthToCenterPointConverter x:Key="conv_ActualWidthToCenterPoint" />
    </Window.Resources>

    <materialDesign:DialogHost DialogContent="{Binding BotSettingsModel}"
                               DialogContentTemplate="{StaticResource dt_BotSettingsDialog}"
                               DialogTheme="Inherit"
                               Identifier="RootDialog"
                               IsOpen="{Binding IsDialogOpened}"
                               SnackbarMessageQueue="{Binding ElementName=m_ErrorMessageQueueSnackbar, Path=MessageQueue}"
                               >
        <!--<Behaviors:Interaction.Triggers>
            <Behaviors:EventTrigger EventName="DialogClosing">
                <Behaviors:InvokeCommandAction Command="{Binding TryStoreAndSetTimePointsCommand}" />
            </Behaviors:EventTrigger>
        </Behaviors:Interaction.Triggers>-->

        <Grid>
            <!--  gloss rect  -->
            <Rectangle Width="{Binding ElementName=m_Root, Path=ActualWidth}"
                       Height="{Binding ElementName=m_Root, Path=ActualHeight}"
                       Opacity="0.7"
                       >
                <Rectangle.OpacityMask>
                    <RadialGradientBrush Center="{Binding ElementName=m_Root, Path=ActualWidth, Converter={StaticResource conv_ActualWidthToCenterPoint}}" GradientOrigin="{Binding ElementName=m_Root, Path=ActualWidth, Converter={StaticResource conv_ActualWidthToTopRightPoint}}" MappingMode="Absolute" RadiusX="500" RadiusY="500" SpreadMethod="Pad">
                        <RadialGradientBrush.GradientStops>
                            <GradientStop Offset="0" Color="#FF000000" />
                            <GradientStop Offset="1" Color="#00000000" />
                        </RadialGradientBrush.GradientStops>
                    </RadialGradientBrush>
                </Rectangle.OpacityMask>
                <Rectangle.Fill>
                    <ImageBrush TileMode="FlipXY"
                                Viewport="0,0,256,256"
                                ViewportUnits="Absolute"
                                >
                        <ImageBrush.ImageSource>
                            <DrawingImage>
                                <DrawingImage.Drawing>
                                    <DrawingGroup>
                                        <ImageDrawing ImageSource="{StaticResource img_Gloss}" Rect="0,0,256,256" />
                                    </DrawingGroup>
                                </DrawingImage.Drawing>
                            </DrawingImage>
                        </ImageBrush.ImageSource>
                    </ImageBrush>
                </Rectangle.Fill>
            </Rectangle>

            <DockPanel>
                <materialDesign:Snackbar x:Name="m_ErrorMessageQueueSnackbar"
                                         DockPanel.Dock="Bottom"
                                         HorizontalAlignment="Stretch"
                                         ActionButtonStyle="{StaticResource MaterialDesignSnackbarActionDarkButton}"
                                         MessageQueue="{Binding ErrorMessageQueue}"
                                         />


                <!--  LCD  -->
                <Grid DockPanel.Dock="Top"
                      Width="700"
                      Height="350"
                      Margin="0,30,0,0"
                      >
                    <Border BorderBrush="Black"
                            BorderThickness="0"
                            CornerRadius="4"
                            Background="Black"
                            >
                        <Grid>
                            <usercontrols:Lcd DataContext="{Binding}" />
                            <Rectangle x:Name="m_GlossRect"
                                       IsHitTestVisible="False"
                                       Opacity="0.13"
                                       RadiusX="4"
                                       RadiusY="4"
                                       >
                                <Rectangle.Fill>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1.3">
                                        <LinearGradientBrush.GradientStops>
                                            <GradientStop Offset="0.38" Color="#00FFFFFF" />
                                            <GradientStop Offset="0.4" Color="#FFFFFFFF" />
                                            <GradientStop Offset="0.7" Color="#FFFFFFFF" />
                                            <GradientStop Offset="0.72" Color="#00FFFFFF" />
                                        </LinearGradientBrush.GradientStops>
                                    </LinearGradientBrush>
                                </Rectangle.Fill>
                                <Rectangle.OpacityMask>
                                    <RadialGradientBrush Center="{Binding ElementName=m_Root, Path=ActualWidth, Converter={StaticResource conv_ActualWidthToCenterPoint}}" GradientOrigin="{Binding ElementName=m_Root, Path=ActualWidth, Converter={StaticResource conv_ActualWidthToTopRightPoint}}" MappingMode="Absolute" RadiusX="500" RadiusY="500" SpreadMethod="Pad">
                                        <RadialGradientBrush.GradientStops>
                                            <GradientStop Offset="0" Color="#FF000000" />
                                            <GradientStop Offset="1" Color="#00000000" />
                                        </RadialGradientBrush.GradientStops>
                                    </RadialGradientBrush>
                                </Rectangle.OpacityMask>

                            </Rectangle>
                            <Border BorderBrush="#151515"
                                    BorderThickness="0,1,1,0"
                                    CornerRadius="4"
                                    />
                            <Border BorderBrush="#000000"
                                    BorderThickness="1,0,0,1"
                                    CornerRadius="4"
                                    />
                        </Grid>
                    </Border>
                </Grid>

                <usercontrols:ControlButtons DockPanel.Dock="Top"
                                             DataContext="{Binding}"
                                             VerticalAlignment="Top"
                                             />
            </DockPanel>
        </Grid>
    </materialDesign:DialogHost>
</Window>
