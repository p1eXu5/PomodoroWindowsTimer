<Window x:Class="PomodoroWindowsTimer.WpfClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ctrl="clr-namespace:PomodoroWindowsTimer.WpfClient.CustomControls"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:digitPanel="clr-namespace:p1eXu5.Wpf.DigitPanel;assembly=p1eXu5.Wpf.DigitPanel"
        xmlns:local="clr-namespace:PomodoroWindowsTimer.WpfClient"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:settings="clr-namespace:PomodoroWindowsTimer.WpfClient.UserControls.Settings"
        xmlns:usercontrols="clr-namespace:PomodoroWindowsTimer.WpfClient.UserControls"
        xmlns:vm="clr-namespace:PomodoroWindowsTimer.ElmishApp;assembly=PomodoroWindowsTimer.ElmishApp"
        xmlns:conv="clr-namespace:PomodoroWindowsTimer.WpfClient.Converters"
        x:Name="m_Root"
        Title="{Binding Title}"
        Width="800"
        Height="520"
        MinWidth="800"
        MinHeight="520"
        usercontrols:UIAssistant.AreRunningTimePointsShown="False"
        FontFamily="{DynamicResource MaterialDesignFont}"
        Icon="pomodoro-technique.ico"
        TextElement.FontSize="13"
        TextElement.FontWeight="Regular"
        TextElement.Foreground="{DynamicResource MaterialDesign.Brush.Foreground}"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource br_Base}"
        mc:Ignorable="d"
        >
    <Window.Resources>
        <DataTemplate x:Key="dt_BotSettingsDialog">
            <settings:BotSettings DataContext="{Binding}" />
        </DataTemplate>
        <conv:ActualWidthToTopRightPointConverter x:Key="conv_ActualWidthToTopRightPoint" />
        <conv:ActualWidthToCenterPointConverter x:Key="conv_ActualWidthToCenterPoint" />
    </Window.Resources>

    <materialDesign:DialogHost DialogClosing="DialogHost_DialogClosing"
                               DialogContentTemplate="{StaticResource dt_BotSettingsDialog}"
                               DialogTheme="Inherit"
                               Identifier="RootDialog"
                               SnackbarMessageQueue="{Binding ElementName=m_ErrorMessageQueueSnackbar,
                                                              Path=MessageQueue}"
                               >

        <Grid>
            <!--  gloss rect  -->
            <Rectangle Width="{Binding ElementName=m_Root,
                                       Path=ActualWidth}"
                       Height="{Binding ElementName=m_Root,
                                        Path=ActualHeight}"
                       Opacity="0.7"
                       >
                <Rectangle.OpacityMask>
                    <RadialGradientBrush MappingMode="Absolute"
                                         Center="{Binding ElementName=m_Root,
                                                          Path=ActualWidth,
                                                          Converter={StaticResource conv_ActualWidthToCenterPoint}}"
                                         SpreadMethod="Pad"
                                         RadiusX="500"
                                         RadiusY="500"
                                         GradientOrigin="{Binding ElementName=m_Root,
                                                                  Path=ActualWidth,
                                                                  Converter={StaticResource conv_ActualWidthToTopRightPoint}}"
                                         >
                        <RadialGradientBrush.GradientStops>
                            <GradientStop Offset="0" Color="#FF000000" />
                            <GradientStop Offset="1" Color="#00000000" />
                        </RadialGradientBrush.GradientStops>
                    </RadialGradientBrush>
                </Rectangle.OpacityMask>
                <Rectangle.Fill>
                    <ImageBrush TileMode="FlipXY"
                                ViewportUnits="Absolute"
                                Viewport="0,0,256,256"
                                >
                        <ImageBrush.ImageSource>
                            <DrawingImage>
                                <DrawingImage.Drawing>
                                    <DrawingGroup>
                                        <ImageDrawing ImageSource="{StaticResource img_Gloss}"
                                                      Rect="0,0,256,256"
                                                      />
                                    </DrawingGroup>
                                </DrawingImage.Drawing>
                            </DrawingImage>
                        </ImageBrush.ImageSource>
                    </ImageBrush>
                </Rectangle.Fill>
            </Rectangle>

            <DockPanel>
                <materialDesign:Snackbar x:Name="m_ErrorMessageQueueSnackbar"
                                         DockPanel.Dock="Bottom"
                                         HorizontalAlignment="Stretch"
                                         ActionButtonStyle="{StaticResource MaterialDesignSnackbarActionDarkButton}"
                                         MessageQueue="{Binding ErrorMessageQueue}"
                                         />


                <!--  LCD  -->
                <Grid DockPanel.Dock="Top"
                      Width="700"
                      Height="350"
                      Margin="0,30,0,0"
                      >
                    <Border CornerRadius="4"
                            Background="Black"
                            BorderBrush="Black"
                            BorderThickness="0"
                            >
                        <Grid>
                            <usercontrols:Lcd DataContext="{Binding}" />
                            <Rectangle x:Name="m_GlossRect"
                                       IsHitTestVisible="False"
                                       Opacity="0.13"
                                       RadiusX="4"
                                       RadiusY="4"
                                       >
                                <Rectangle.Fill>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1.3">
                                        <LinearGradientBrush.GradientStops>
                                            <GradientStop Offset="0.38" Color="#00FFFFFF" />
                                            <GradientStop Offset="0.4" Color="#FFFFFFFF" />
                                            <GradientStop Offset="0.7" Color="#FFFFFFFF" />
                                            <GradientStop Offset="0.72" Color="#00FFFFFF" />
                                        </LinearGradientBrush.GradientStops>
                                    </LinearGradientBrush>
                                </Rectangle.Fill>
                                <Rectangle.OpacityMask>
                                    <RadialGradientBrush MappingMode="Absolute"
                                                         Center="{Binding ElementName=m_Root,
                                                                          Path=ActualWidth,
                                                                          Converter={StaticResource conv_ActualWidthToCenterPoint}}"
                                                         SpreadMethod="Pad"
                                                         RadiusX="500"
                                                         RadiusY="500"
                                                         GradientOrigin="{Binding ElementName=m_Root,
                                                                                  Path=ActualWidth,
                                                                                  Converter={StaticResource conv_ActualWidthToTopRightPoint}}"
                                                         >
                                        <RadialGradientBrush.GradientStops>
                                            <GradientStop Offset="0" Color="#FF000000" />
                                            <GradientStop Offset="1" Color="#00000000" />
                                        </RadialGradientBrush.GradientStops>
                                    </RadialGradientBrush>
                                </Rectangle.OpacityMask>

                            </Rectangle>
                            <Border BorderBrush="#151515"
                                    BorderThickness="0,1,1,0"
                                    CornerRadius="4"
                                    />
                            <Border BorderBrush="#000000"
                                    BorderThickness="1,0,0,1"
                                    CornerRadius="4"
                                    />
                        </Grid>
                    </Border>
                </Grid>

                <usercontrols:ControlButtons DockPanel.Dock="Top"
                                             VerticalAlignment="Top"
                                             DataContext="{Binding}"
                                             />
            </DockPanel>
        </Grid>
    </materialDesign:DialogHost>
</Window>
